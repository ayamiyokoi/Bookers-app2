<% if @user.errors.any? %>
  <%= @user.errors.count %>件のエラーが発生しました
  <% @user.errors.full_messages.each do |message| %>
    <%= message %>
  <% end %>
<% end %>
<!--左上部分-->
<div class="row">
 <div class="col-md-3">
  <div class="profile-container">
    <h1>User info</h1>
    <table>
      <tr>
        <%= attachment_image_tag @user, :profile_image, size: '100x100', format: 'jpeg', fallback: "no_image.jpg" %>
      </tr>
      <tr>
        <th>name</th>
        <td><%= @user.name %></td>
      </tr>
      <tr>
        <th>introduction</th>
        <td><%= @user.introduction %></td>
      </tr>
    </table>
     <div class="row"><%= link_to edit_user_path(@user), class: "btn btn-outline-secondary btn-lg btn-block" do %>
     <i class="fas fa-user-cog"></i>
     <% end %></div>

  </div>

<!--左下部分-->
<h1>New Book</h1>
<!-- form_with部分 -->
<%= form_with model: @book, url:'/books', local:true do |f| %>
  <h4>Title</h4>
  <%= f.text_field :title %>
  <h4>Opinion</h4>
  <%= f.text_area :body %>
  <p><%= f.submit 'Create Book' %></p>
<% end %>
</div>

<!--右側-->
<div class="col-md-8 offset-md-1">
  <h1>Book Detail</h1>
  <table class="table table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Title</th>
      <th>Opinion</th>
      <% if @user.id == current_user.id %>
      <th colspan="2"></th>
      <% end %>
    </tr>
  </thead>
  <tbody>
   <% @user.books.each do |user| %>
   <tr>
     <td><%= attachment_image_tag @user, :profile_image, size: '40x40', fallback: "no_image.jpg" %><br><%= @user.name %></td>
     <td><%= user.title %></td>
     <td><%= user.body %></td>
      <% if @user.id == current_user.id %>
      <td><%= link_to "Edit", edit_book_path(user), class: "btn btn-success" %></td>
      <td><%= link_to "Destroy", book_path(user),class: "btn btn-danger", method: :delete %></td>
      <% end %>
   </tr>
<% end %>
 </tbody>
 </table>

</div>
</div>